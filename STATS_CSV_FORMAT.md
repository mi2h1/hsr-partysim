# ステータス専用CSV更新フォーマット

## 概要
キャラクター名をキーとして、ステータス情報のみを更新するための専用CSV形式です。
既存のスキル情報やバフ・デバフ情報は一切変更せず、ステータス項目のみを更新します。

## CSVフォーマット

### ヘッダー行（必須）
```csv
キャラクター名,HP,攻撃力,防御力,速度,EP,ステータスブースト1種別,ステータスブースト1数値,ステータスブースト2種別,ステータスブースト2数値,ステータスブースト3種別,ステータスブースト3数値
```

### データ行の例
```csv
ロビン,1281,640,485,102,110,会心率,5.3,会心ダメージ,5.3,効果命中,4.0
トパーズ,1203,620,461,110,110,会心率,3.2,攻撃力,4.3,速度,2.3
```

## フィールド仕様

### 基礎ステータス
- **キャラクター名**: データベースに既存のキャラクター名と完全一致する必要があります
- **HP**: 整数値（空欄可 = null）
- **攻撃力**: 整数値（空欄可 = null）
- **防御力**: 整数値（空欄可 = null）
- **速度**: 整数値（空欄可 = null）
- **EP**: 整数値（空欄可 = null）

### ステータスブースト（各3項目まで）
- **ステータスブースト種別**: ステータス名（空欄可 = null）
  - 例: `会心率`, `会心ダメージ`, `攻撃力%`, `HP%`, `防御力%`, `速度`, `効果命中`, `効果抵抗`
- **ステータスブースト数値**: 小数値（空欄可 = null）
  - 例: `5.3`, `4.0`, `10.5`

## 重要な注意事項

### データ更新の動作
- **既存キャラクターのみ更新**: データベースに存在しないキャラクター名は無視されます
- **ステータス項目のみ更新**: スキル、バフ・デバフ、星魂情報は一切変更されません
- **部分更新対応**: 空欄のフィールドはnullで更新されます
- **トランザクション処理**: すべての更新が成功するか、全てロールバックされます

### エラー処理
- 存在しないキャラクター名は警告として報告されますが、処理は継続されます
- CSVフォーマットエラーの場合は全体がエラーとなります
- 数値フィールドに無効な値がある場合はエラーとなります

## 使用例

### 完全なデータ例
```csv
キャラクター名,HP,攻撃力,防御力,速度,EP,ステータスブースト1種別,ステータスブースト1数値,ステータスブースト2種別,ステータスブースト2数値,ステータスブースト3種別,ステータスブースト3数値
ロビン,1281,640,485,102,110,会心率,5.3,会心ダメージ,5.3,効果命中,4.0
トパーズ,1203,620,461,110,110,会心率,3.2,攻撃力,4.3,速度,2.3
花火,917,523,551,106,120,攻撃力%,4.3,速度,2.3,,
銀狼,1358,562,551,107,120,効果命中,6.4,HP%,4.3,防御力%,5.4
```

### 部分データ例（基礎ステータスのみ）
```csv
キャラクター名,HP,攻撃力,防御力,速度,EP,ステータスブースト1種別,ステータスブースト1数値,ステータスブースト2種別,ステータスブースト2数値,ステータスブースト3種別,ステータスブースト3数値
ロビン,1281,640,485,102,110,,,,,
トパーズ,1203,620,461,110,110,,,,,
```

### ブーストのみ更新例
```csv
キャラクター名,HP,攻撃力,防御力,速度,EP,ステータスブースト1種別,ステータスブースト1数値,ステータスブースト2種別,ステータスブースト2数値,ステータスブースト3種別,ステータスブースト3数値
ロビン,,,,,,会心率,5.3,会心ダメージ,5.3,効果命中,4.0
トパーズ,,,,,,会心率,3.2,攻撃力,4.3,速度,2.3
```

## API仕様
- **エンドポイント**: `POST /api/update-stats`
- **パラメータ**: `csvFile` (File)
- **レスポンス**: 
  - `success`: 成功フラグ
  - `message`: 結果メッセージ
  - `updated_characters`: 更新されたキャラクター名の配列
  - `not_found_characters`: 見つからなかったキャラクター名の配列（警告）